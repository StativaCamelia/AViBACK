<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/desktop_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/mobile_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/common_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/landscape_style.css"
    />
  </head>
  <body>
    <div class="documentation">
      <h1>Documentation</h1>
      <div class="documentation_content">
        <h2 id="general_documentation">I. General Documentation</h2>
        <ol>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#app_progress">Application Progress</a></li>
          <li><a href="#app_architecture">Application Architecture</a></li>
          <li><a href="#ui_ux">UI and UX</a></li>
        </ol>
        <h2 id="user_guide">II. User Guide</h2>
        <ol>
          <li><a href="#api_accidents">API Accidents</a></li>
          <li><a href="#api_auth">API Authentication and Authorization</a></li>
        </ol>
      </div>
      <div id="introduction">
        <h2>I.1. Introduction</h2>
        <section>
          <p>
            US Accidents Smart Visualizer(AVi) is a web application for flexible
            visualization of US accident data, based on our REST API. The system
            provides support for multi-criteria search for reported incidents,
            creating chart statistics in 3 manners - pie chart, bar chart and
            line chart - and a cartographic rendering. These statistics can be
            exported in CSV, PNG and SVG formats.
          </p>
          <p>
            The application also provides an authentication system, as well as a
            module for managing the entire system. A user subscribes to the
            newsletter based on the chosen criterion, thus receiving emails
            about his topic of interest. An admin can monitor and modify the
            databases of the two services exposed through the administration
            module.
          </p>
        </section>
      </div>
      <div id="app_progress">
        <h2>I.2. Application Progress</h2>
        <section>
          <ol>
            <li><a href="#app_progress_1">First steps</a></li>
            <li>
              <a href="#app_progress_2">Getting faster better stronger</a>
            </li>
          </ol>
          <section id="app_progress_1">
            <h3>First steps</h3>
            <p>
              In the first weeks we outlined the design of the user interface,
              sketching the structure of the pages, and then we started working
              on the application.
            </p>
            <p>
              The first elements created were the menu and the general layout of
              the application, then we moved on details, on each page.
            </p>
            <div class="slideshow-container">
              <div class="firstSlider fade">
                <div class="numberTextFirst">1 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_1.jpg"
                  alt="Plan design"
                />
              </div>

              <div class="firstSlider fade">
                <div class="numberTextFirst">2 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_2.jpg"
                  alt="Plan design"
                />
              </div>

              <div class="firstSlider fade">
                <div class="numberTextFirst">3 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/images/old.jpg"
                  alt="Plan design"
                />
              </div>

              <div class="firstSlider fade">
                <div class="numberTextFirst">4 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/images/refactor.jpg"
                  alt="Plan design"
                />
              </div>

              <a class="prev" onclick="plusSlidesFirst(-1)">&#10094;</a>
              <a class="next" onclick="plusSlidesFirst(1)">&#10095;</a>
            </div>
            <br />

            <div style="text-align: center;">
              <span class="dotFirst" onclick="currentSlideFirst(1)"></span>
              <span class="dotFirst" onclick="currentSlideFirst(2)"></span>
              <span class="dotFirst" onclick="currentSlideFirst(3)"></span>
              <span class="dotFirst" onclick="currentSlideFirst(4)"></span>
            </div>
            <p>
              Along the way we added new elements to improve the visual
              experience of the user as well as elements that lead to the
              interaction with the services created later.
            </p>
            <p><strong>Technologies</strong></p>
            <p>
              The technologies used are HTML, CSS and JavaScript, these being
              the basis of the presented interface. HTML was used in order to
              mark and structure the content of the pages, CSS has the role of
              stylizing this content and JavaScript gives dynamism to the pages.
            </p>
            <p>
              For the representation of the statistics we used the libraries
              D3.js (for pie chart) and Chart.js (for bar chart and line chart).
              D3.js is a JavaScript library for producing dynamic, interactive
              data visualizations in web browsers. It makes use of SVG, HTML5
              and CSS standards. Chart.js is a free open-source JavaScript
              library for data visualization. It's tooltip and legends features
              are useful to add the extra details on charts. Works very well on
              modern browsers and charts are cross browser and cross platform
              compatible.
            </p>
          </section>
          <section id="app_progress_2">
            <h3>Getting faster better stronger</h3>
            <p>
              After we finished the frontend part of the project, we started
              thinking about the implementation of the functionalities and how
              we will integrate them in the backend part of the application.
            </p>
            <p><strong>Technologies</strong></p>
            <p>
              Initially we established the technologies we will use. On the
              frontend side we migrated to Pug technology instead of HTML and on
              the backend side we chose Node.JS as the technology because we
              were easily familiar with JavaScript because we used it in the
              scripts on the frontend. For data storage, we chose to use MongoDB
              because it's a document database, which means it stores data in
              JSON-like documents.
            </p>
            <p>
              Pug is a template engine for Node and for the browser. It compiles
              to HTML and has a simplified syntax, which can make you more
              productive and your code more readable. Pug makes it easy both to
              write reusable HTML, as well as to render data pulled from a
              database or API.
            </p>
            <p>
              Node.js is an open-source, cross-platform, JavaScript runtime
              environment that executes JavaScript code outside a web browser.
              Node.js lets developers use JavaScript to write command line tools
              and for server-side scripting.
            </p>
            <p>
              MongoDB is a rich and expressive query language that allows you to
              filter and sort by any field, no matter how nested it may be
              within a document. Supports arrays and nested objects as values
              and allows for flexible and dynamic schemas.
            </p>
            <p>
              The next step was to establish the application architecture.
              initially we developed a single project based on the MVC
              architecture, later translating the whole into 3 separate projects
              - the application interface, the authentication-authorization
              service and the accident service - where the services have REST
              architecture.
            </p>
          </section>
        </section>
      </div>
      <div id="app_architecture">
        <h3>I.3. Application Architecture</h3>
        <section>
          <ol>
            <li>
              <a href="#about_architecture">About Application Architecture</a>
            </li>
            <li><a href="#c4_model">C4 Model Diagram</a></li>
            <li><a href="#data_structure">Data Structure</a></li>
            <li><a href="#management">Management</a></li>
          </ol>
          <section id="about_architecture">
            <h3>About Application Architecture</h3>
            <p>
              As we mentioned, the project includes two REST services and the
              entire system interface.
            </p>
            <p>
              Regarding the interface, we designed a simple, flexible and easy
              to use structure, in order to facilitate the user experience on
              the web site. The logic underlying the architecture consists in:
              the user interacts with the interface, the interface exposes the
              representation of the data and the offered functionalities (view),
              his requests are sent both to the internal routing to navigate
              between the web pages of the application (router and controller)
              and to the two exposed services - for registration, authentication
              and authorization the authentication-authorization service is
              called and for the representation of the charts the accident
              service is called.
            </p>
            <p>
              Regarding our services, they are RESTful Web services that allow
              the requesting systems to access and manipulate textual
              representations of Web resources by using a uniform and predefined
              set of stateless operations. Requests made to URIs of exposed
              resources will elicit a response with a payload formatted in JSON.
              Using HTTP, the operations (HTTP methods) available are GET, POST,
              PUT and DELETE (and OPTIONS for preflight request in CORS).
            </p>
            <p>
              Both services present the following logic: the received requests
              are routed, according to the resource to be called (router), after
              routing, the corresponding controller will try to answer the
              request by querying the database through the model; the model will
              respond to the controller and it will send the final response to
              the client.
            </p>
            <p>
              The authentication-authorization service exposes the functionality
              of registering a new account within the application as well as the
              authentication functionality with an already created account. In
              addition, the service authorizes the admin (requests from an
              admin) giving him access to direct manipulation of the database -
              in the case of this service is exposed the users collection, a
              collection that stores registered users.
            </p>
            <p>
              The accident service responds to requests for information about
              accidents stored in the database (accidents registered in the USA
              during 2016-2019). Through this service, the secondary collections
              are created that help to display the filters (states, counties,
              cities, streets), and after the authorization (calling the
              authentication-authorization service) an admin will be able to
              produce changes and take information from the database - in the
              case of this service, the accident collection is exposed.
            </p>
          </section>
          <section id="c4_model">
            <h3>C4 Model Diagram</h3>
            <p>
              To present the overall architecture, we will use the C4 Model
              diagram which provides four different levels of abstraction, each
              of which is relevant to a different audience.
            </p>

            <div class="slideshow-container">
              <div class="secondSlider fade">
                <div class="numberTextSecond">1 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/1.C4-CONTEXT.png"
                  alt="C4-CONTEXT"
                />
                <div class="text">Level 1 - Context Diagram</div>
              </div>

              <div class="secondSlider fade">
                <div class="numberTextSecond">2 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/2.C4-CONTAINER.png"
                  alt="C4-CONTAINER"
                />
                <div class="text">Level 2 - Container Diagram</div>
              </div>

              <div class="secondSlider fade">
                <div class="numberTextSecond">3 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/3.C4-COMPONENT.png"
                  alt="C4-COMPONENT"
                />
                <div class="text">Level 3 - Component Diagram</div>
              </div>

              <div class="secondSlider fade">
                <div class="numberTextSecond">4 / 4</div>
                <img
                  src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/4.C4-CODE.png"
                  alt="C4-CODE"
                />
                <div class="text">Level 4 - Code Diagram</div>
              </div>

              <a class="prev" onclick="plusSlidesSecond(-1)">&#10094;</a>
              <a class="next" onclick="plusSlidesSecond(1)">&#10095;</a>
            </div>
            <br />

            <div style="text-align: center;">
              <span class="dotSecond" onclick="currentSlideSecond(1)"></span>
              <span class="dotSecond" onclick="currentSlideSecond(2)"></span>
              <span class="dotSecond" onclick="currentSlideSecond(3)"></span>
              <span class="dotSecond" onclick="currentSlideSecond(4)"></span>
            </div>
          </section>
          <section id="data_structure">
            <h3>Data Structure</h3>
            <p>
              The main collection used is the accident collection, its source
              being:
              <span class="documentation_links"
                ><a
                  href="https://smoosavi.org/datasets/us_accidents"
                  target="_blank"
                  >https://smoosavi.org/datasets/us_accidents</a
                ></span
              >. This collection contains accident data that are collected from
              February 2016 to December 2019 for the Contiguous United States.
            </p>
            <p>
              Initially this data was found in CSV format, but to facilitate
              mapping to the collection created in MongoDB we converted the
              dataset to JSON format. Also, to reduce the search time in the
              entire collection, we created local indexes on the document
              fields.
            </p>
            <p>The schema structure is:</p>
            <pre><code class="JSON language-JSON">{
    _id: ObjectID,
    Source: String,
    TMC: String,
    Severity: Number, enum: [null, 1, 2, 3],
    End_Time: Date,
    Start_Lat: Number,
    Start_Lng: Number,
    End_Lat: Number,
    End_Lng: Number,
    Distance(mi): String,
    Description: String,
    Number: String,
    Street: String,
    Side: String, enum: ["", "L", "R"],
    City: String,
    County: String,
    State: String,
    Zipcode: String,
    Country: String,
    Timezone: String,
    Airport_Code: String,
    Weather_Timestamp: String,
    Temperature(F): Number,
    Wind_Chill(F): Number,
    Humidity(%): Number,
    Pressure(in): Number,
    Visibility(mi): Number,
    Wind_Direction: "SW",
    Wind_Speed(mph): Number,
    Weather_Condition: String,
    Amenity: String,
    Bump: String,
    Crossing: String,
    Give_Way: String,
    Junction: String,
    No_Exit: String,
    Railway: String,
    Roundabout: String,
    Station: String,
    Stop: String,
    Traffic_Calming: String,
    Traffic_Signal: String,
    Turning_Loop: String,
    Sunrise_Sunset: String,
    Civil_Twilight: String,
    Nautical_Twilight: String,
    Astronomical_Twilight: String,
    Start_Date: String,
    Start_Hour: String
}
</code></pre>
            <p>
              Another important collection is the users collection, which we
              created in order to store the users registered in the application.
              Based on this collection, the authentication and authorization
              checks are made within the service that deals with this.
            </p>
            <p>The schema structure is:</p>
            <pre><code class="JSON language-JSON">{
    _id: ObjectID,
    type: String,
    email: String,
    username: String,
    password: String
}
</code></pre>
          </section>
          <section id="management">
            <h3>Management</h3>
            <p>
              For task management we used a board in Trello where we posted and
              assigned all the tasks identified by us, and for code management
              we used a GitHub repository where everyone uploaded his
              contribution to the project.
            </p>
            <p>
              On the trello board, in the TO DO section we wrote down the tasks
              we set together and assigned them together with a deadline, in the
              DOING section we moved the tasks when we were dealing with them
              and in the DONE section we moved them when they were completed.
            </p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/images/trello_board.png"
              alt="Trello Board"
            />
            <p>
              Regarding the code management, each of us pushed the
              implementations of the established tasks, respecting the
              deadlines. The final form of the project, where you can also see
              the progress, can be found at:
              <span class="documentation_links"
                ><a
                  href="https://github.com/StativaCamelia/AViBACK"
                  target="_blank"
                  >https://github.com/StativaCamelia/AViBACK</a
                ></span
              >. The repository contains three directories that represent the
              entire application: the frontend directory that contains the files
              corresponding to the interface, the authentication directory that
              contains the authentication-authorization API files, and the
              accidents directory that contains the accidents API files.
            </p>
            <p>
              The frontend directory contains files for router, controllers,
              views and static files loader.
            </p>
            <p>
              The authentication directory contains files for api routes,
              controllers, models and api tests.
            </p>
            <p>
              The accidents directory contains files for api routes,
              controllers, util functions, models and api tests.
            </p>
            <div class="code_management">
              <div class="div_code_management">
                <h3>Stativă Camelia-Georgiana</h3>
                <p>Application design</p>
                <p>Creating project structure</p>
                <p>Project restructure</p>
                <p>Database structure</p>
                <p>Project documentation</p>
                <p>Map page and line chart page</p>
                <p>Export for map page</p>
                <p>Multi-criteria filters</p>
                <p>Authorization for admin and routes</p>
                <p>Email system integration</p>
                <p>
                  Converting CSV format to JSON format for accidents collection
                </p>
                <p>API tests</p>
              </div>
              <div class="div_code_management">
                <h3>Zănceanu Ana-Maria</h3>
                <p>Application design</p>
                <p>Project restructure</p>
                <p>Database structure</p>
                <p>Project documentation</p>
                <p>Pie chart page</p>
                <p>Export for pie page</p>
                <p>Multi-criteria filters</p>
                <p>Dashboard</p>
                <p>Refactoring application design</p>
                <p>Register, login and logout</p>
              </div>
              <div class="div_code_management">
                <h3>Tipa Adrian-Ionuț</h3>
                <p>Application design</p>
                <p>Home page calls</p>
                <p>Project restructure</p>
                <p>Database structure</p>
                <p>Project documentation</p>
                <p>Profile page</p>
                <p>Bar chart page</p>
                <p>Export for bar chart and line chart pages</p>
              </div>
            </div>
          </section>
        </section>
      </div>
      <div id="ui_ux">
        <h3>I.4. UI and UX</h3>
        <section>
          <p>
            In this chapter we thought of offering a pleasant user experience on
            our site, so we looked subjectively and thought what we would like,
            as users, to see on a website with these specifications. So we
            decided on a simple design, with warm colors in blue and white, with
            subtle animations and an easy-to-view structure, which easily adapts
            to the mobile version.
          </p>
          <p>
            First of all, we considered that the main page should reflect the
            purpose of the application so that the home page contains a counter
            that will increase to the number of accidents in the current day but
            totaled from 2016-2019 (according to accidents recorded in the
            database). Next to the counter we also have a news section where
            random descriptions of accidents appear in the database. Below is
            information on the source dataset as well as some tips on driving
            safety.
          </p>
          <p>
            Within the application you can find the related documentation as
            well as our contact details. We also have the registration and
            authentication section, and after that the corresponding page is
            rendered - if the authentication credentials belong to a user then
            he will be given the profile page, and if they belong to an admin he
            will be given the dashboard. In case of a user, after registration,
            he will receive an account confirmation email, by which he agrees to
            subscribe to the newsletter.
          </p>
          <p>
            On the profile page a user will be able to see the data retained in
            the account, except for the password. He can select a certain
            criterion, and it will be retained in the database, and he will be
            notified when a new accident occurs or an existing accident is
            updated that presents the criterion chosen by him.
          </p>
          <p>
            On the dashboard page an admin will be able to see general data
            about the two large exposed collections of services - users and
            accidents - and can interact directly with them through the exposed
            methods. In the case of the users collection, an admin will be able
            to create a new user, will be able to see all existing users or only
            a certain user by id, will be able to update a user or will be able
            to delete users (one user by id or all existing users).
          </p>
          <p>
            The main part of the website is given by the pages with statistics,
            pages delimited according to the way of viewing the chart. More
            precisely, the following pages can be found: map page for
            cartographic rendering, pie chart page for pie view, bar chart page
            for bar view as well as line chart page for line view. On each page
            are exposed selection criteria after which the user will be able to
            create his statistics, respectively to create the chosen chart.
          </p>
          <p>
            On the map page, the cartographic rendering consists in the fact
            that the user selects the desired criteria and in response the map
            will be colored according to the states in which accidents occurred
            with those specifications sent (he will not be able to select
            criteria related to location - state, county, city, street).
          </p>
          <p>
            In the case of the pie page, the user will choose the criteria for
            selecting the accidents as well as the criterion according to which
            the pie will be formed. If the answer received will contain more
            than two entities, then a list will be displayed from which he will
            be able to choose what to represent on the pie.
          </p>
          <p>
            For bar chart and line chart pages, the logic of the representation
            is the same. More precisely, the user will choose the time interval
            and after he wants to group this interval (years, months, days) and
            then he will choose the accident selection criteria. Can compose
            several datasets that will be displayed on the chart, in different
            colors, based on the chosen time interval.
          </p>
          <p>
            After the desired statistics are created, each page allows their
            download in three formats - CSV, PNG and SVG.
          </p>
        </section>
      </div>

      <div id="content">
        <h3 id="api_accidents">II.1. API Accidents</h3>
        <h2>Response structure</h2>
        <p>The structure of the API responses' body is as follows:</p>
        <ul>
          <li>
            <p>
              for successful responses, a JSON object containing the properties:
            </p>
            <ul>
              <li><code>success</code>: <code>true</code></li>
              <li>
                <code>data</code>: An object, structure detailed for each route
                below.
              </li>
            </ul>
          </li>
          <li>
            <p>
              for unsuccessful responses, a JSON object containing the<br />
              properties:
            </p>
            <ul>
              <li><code>success</code>: <code>false</code></li>
              <li>
                <code>error</code>: An object containing a
                <code>message</code> property, and<br />
                sometimes additional helpful properties.
              </li>
            </ul>
          </li>
        </ul>
        <h2 id="without-authorization">Without Authorization</h2>
        <p>
          <strong
            >/accidents<br />
            GET<br />
            Query parameters:</strong
          >
        </p>
        <ul>
          <li>
            <p>
              type - the type of representation the returned data will be used
              for(map, pie, line or bar)
            </p>
          </li>
          <li>
            <p>
              any criteria the user wants his data to be filtered by and the
              value of the criteria<br />
              Get the accidents that meet the conditions in an appropriate
              format for the type of representation they will be used for
            </p>
          </li>
        </ul>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents?Type=pie&amp;Pie_Criterion=Severity
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": [
    {
      "_id": 2,
      "count": 1993409
    },
    {
      "_id": 3,
      "count": 887619
    },
    {
      "_id": 4,
      "count": 92337
    },
    {
      "_id": 1,
      "count": 970
    }
  ]
}
</code></pre>
        <p>
          <strong
            >/accidents/byDate<br />
            GET</strong
          ><br />
          Get the number of accidents that happened on this day in any given
          year<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/byDate
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": 6793
}
</code></pre>
        <p>
          <strong
            >/accidents/details<br />
            GET</strong
          ><br />
          Get the details of some accidents for a news feed purpose<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/byDetails
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": "&lt;accidents&gt;&lt;accident id= \"1\"&gt;Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.&lt;/accident&gt;&lt;accident id= \"2\"&gt;Accident on I-75 Southbound at Exits 52 52B US-35. Expect delays.&lt;/accident&gt;&lt;accident id= \"3\"&gt;Accident on McEwen Rd at OH-725 Miamisburg Centerville Rd. Expect delays.&lt;/accident&gt;&lt;accident id= \"4\"&gt;Accident on I-270 Outerbelt Northbound near Exit 29 OH-3 State St. Expect delays.&lt;/accident&gt;&lt;accident id= \"5\"&gt;Accident on Oakridge Dr at Woodward Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"6\"&gt;Accident on I-75 Southbound at Exit 54B Grand Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"7\"&gt;Accident on Notre Dame Ave at Warner Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"8\"&gt;Right hand shoulder blocked due to accident on I-270 Outerbelt Westbound at Exit 29 OH-3 State St.&lt;/accident&gt;&lt;accident id= \"9\"&gt;Accident on I-270 Outerbelt Northbound at Exits 7 7A 7B US-40 Broad St. Expect delays.&lt;/accident&gt;&lt;accident id= \"10\"&gt;One lane blocked due to accident on I-70 Westbound at Exits 110 110A 110B Brice Rd. Expect delays.&lt;/accident&gt;&lt;/accidents&gt;"
}
</code></pre>
        <p>
          <strong
            >/accidents/filters<br />
            GET</strong
          ><br />
          Create a database with the location filters and the relationships
          between them, so the data will correspond with the actual data from
          the accidents database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/filters
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
    "content": "Database successfully updated"
}
</code></pre>
        <p>
          <strong
            >With Authorization(The following can only be done by an admin
            account)<br />
            /accidents<br />
            DELETE</strong
          ><br />
          Delets all the accidents<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
    "content": "null"
}
</code></pre>
        <p>
          <strong
            >/accidents<br />
            GET</strong
          ><br />
          Returns all the accidents from the database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p>
          <strong>Returned data example</strong>:<br />
          The content is to large to be displayed
        </p>
        <p>
          <strong
            >/accidents<br />
            POST</strong
          >
        </p>
        <p>Creates a new accident</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p>Request body</p>
        <pre><code class="JSON language-JSON">{
    "State" : "OH",
    "Severity" : 2
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ede3061cec18d11c82748d8",
    "State": "OH",
    "Severity": 2,
    "__v": 0
  }
}
</code></pre>
        <p>
          <strong
            >/accidents/{accidentId}<br />
            PUT</strong
          ><br />
          Update an accident from the database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/5ec65d04607fb826d4b69279<br />
          Request body
        </p>
        <pre><code class="JSON language-JSON">{
    "State" : "OH",
    "Severity" : 2
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ec65d04607fb826d4b69279",
    "ID": "A-3",
    "Source": "MapQuest",
    "TMC": "201.0",
    "Severity": 2,
    "End_Time": "2016-02-08T05:19:27.000Z",
    "Start_Lat": 39.063148,
    "Start_Lng": -84.032608,
    "End_Lat": null,
    "End_Lng": null,
    "Distance(mi)": "0.01",
    "Description": "Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.",
    "Number": "",
    "Street": "State Route 32",
    "Side": "R",
    "City": "Williamsburg",
    "County": "Clermont",
    "State": "OH",
    "Zipcode": "45176",
    "Country": "US",
    "Timezone": "US/Eastern",
    "Airport_Code": "KI69",
    "Weather_Timestamp": "2016-02-08 06:56:00",
    "Temperature(F)": 36,
    "Wind_Chill(F)": 33.3,
    "Humidity(%)": 100,
    "Pressure(in)": 29.67,
    "Visibility(mi)": 10,
    "Wind_Direction": "SW",
    "Wind_Speed(mph)": 3.5,
    "Weather_Condition": "Overcast",
    "Amenity": "False",
    "Bump": "False",
    "Crossing": "False",
    "Give_Way": "False",
    "Junction": "False",
    "No_Exit": "False",
    "Railway": "False",
    "Roundabout": "False",
    "Station": "False",
    "Stop": "False",
    "Traffic_Calming": "False",
    "Traffic_Signal": "True",
    "Turning_Loop": "False",
    "Sunrise_Sunset": "Night",
    "Civil_Twilight": "Night",
    "Nautical_Twilight": "Day",
    "Astronomical_Twilight": "Day",
    "Start_Date": "2016-02-08",
    "Start_Hour": "06:49:27"
  }
}
</code></pre>
        <p>
          <strong
            >/accidents/{accidentId}<br />
            DELETE</strong
          ><br />
          Delete an accident by id<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/5ec65d04607fb826d4b69279<br />
          <strong>Returned data example</strong>:
        </p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ec65d04607fb826d4b69279",
    "ID": "A-3",
    "Source": "MapQuest",
    "TMC": "201.0",
    "Severity": 2,
    "End_Time": "2016-02-08T05:19:27.000Z",
    "Start_Lat": 39.063148,
    "Start_Lng": -84.032608,
    "End_Lat": null,
    "End_Lng": null,
    "Distance(mi)": "0.01",
    "Description": "Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.",
    "Number": "",
    "Street": "State Route 32",
    "Side": "R",
    "City": "Williamsburg",
    "County": "Clermont",
    "State": "OH",
    "Zipcode": "45176",
    "Country": "US",
    "Timezone": "US/Eastern",
    "Airport_Code": "KI69",
    "Weather_Timestamp": "2016-02-08 06:56:00",
    "Temperature(F)": 36,
    "Wind_Chill(F)": 33.3,
    "Humidity(%)": 100,
    "Pressure(in)": 29.67,
    "Visibility(mi)": 10,
    "Wind_Direction": "SW",
    "Wind_Speed(mph)": 3.5,
    "Weather_Condition": "Overcast",
    "Amenity": "False",
    "Bump": "False",
    "Crossing": "False",
    "Give_Way": "False",
    "Junction": "False",
    "No_Exit": "False",
    "Railway": "False",
    "Roundabout": "False",
    "Station": "False",
    "Stop": "False",
    "Traffic_Calming": "False",
    "Traffic_Signal": "True",
    "Turning_Loop": "False",
    "Sunrise_Sunset": "Night",
    "Civil_Twilight": "Night",
    "Nautical_Twilight": "Day",
    "Astronomical_Twilight": "Day",
    "Start_Date": "2016-02-08",
    "Start_Hour": "06:49:27"
  }
}
</code></pre>
        <p>
          <strong
            >/accidents/general<br />
            GET<br
          /></strong>
          Get some general data about the change made on the accidents
          database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/general<br />
          <strong>Returned data example</strong>:
        </p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "accidentsNumber": 2974335,
    "newAccidentsNumber": 3,
    "deletedAccidentsNumber": 3,
    "updatedAccidentsNumber": 7
  }
}
</code></pre>
      </div>

      <div id="content_auth">
        <h3 id="api_auth">II.2. API Authentication and Authorization</h3>
        <h3 id="response-structure">Response structure</h3>
        <p>The structure of the API responses' body is as follows:</p>
        <ul>
          <li>
            <p>
              for successful responses, a JSON object containing the properties:
            </p>
            <ul>
              <li><code>success</code>: <code>true</code></li>
              <li>
                <code>data</code>: An object, structure detailed for each route
                below.
              </li>
            </ul>
          </li>
          <li>
            <p>
              for unsuccessful responses, a JSON object containing the<br />
              properties:
            </p>
            <ul>
              <li><code>success</code>: <code>false</code></li>
              <li>
                <code>error</code>: An object containing a
                <code>message</code> property, and<br />
                sometimes additional helpful properties.
              </li>
            </ul>
          </li>
        </ul>
        <p>
          <strong
            >/users/register<br />
            POST</strong
          >
        </p>
        <p>Creates a new user if the provided data is valid.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/register<br />
          Request Body
        </p>
        <pre><code class="JSON language-JSON"> {
    "email"  : "exemplu123@gmail.com",
    "password" : "exemplu123",
    "username" : "Exemplu123"
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "message": "Successfully registered! Please  confirm your email, sign in and set your profile!"
  }
}
</code></pre>
        <p>
          <strong
            >/users/login<br />
            POST</strong
          ><br />
          Creates a new session for a user by providing him an authorization
          token.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/login<br />
          Request Body
        </p>
        <pre><code class="JSON language-JSON"> {
    "email"  : "exemplu123@gmail.com",
    "username" : "Exemplu123"
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "token" : "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWQ2NTdiOTM1MTY4ZTE5NjgwNDE2MDkiLCJpYXQiOjE1OTE1OTIzOTV9.SZbK9j8b4i1pSXVSLAtSGBgu7dYiAFeTk3zzrjDKZ1s"
  }
}
</code></pre>
        <p>
          <strong
            >/users/login<br />
            GET</strong
          ><br />
          Verify if the user has a valid authorization token in the request
          header and change the content of the page according with his curent
          state.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/login
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
          "value": "PROFILE",
  }
}
</code></pre>
        <p>
          <strong
            >users/authorization<br />
            GET<br />
            Query parameters</strong
          >:
        </p>
        <ul>
          <li>
            <p>
              token: the token we want to check<br />
              Receives a token a verify if the token is associated with an admin
              account
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/authorization<br />
              <strong>Returned data example</strong>:
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON"> {
  "content": {
    "success": true,
    "data": {
      "type": "admin",
      "_id": "5ed657b935168e1968041609",
      "email": "stativa_geo@gmail.com",
      "username": "Admiul",
      "password": "$2b$10$wciYae1dr7HAr77Q5lgLfOgOo4k2yuTTQKba1zMiTbSlWwMZJDNIq",
      "__v": 7
    }
  }
}
</code></pre>
        <p>
          <strong
            >users/send-email<br />
            GET<br />
            Query parameters</strong
          >:
        </p>
        <ul>
          <li>
            <p>
              topic : A topic that a user might be interested in<br />
              Receives a topic and send an email to all the users that are have
              this criteria on their preferences list. The email will announce
              them that new data regarding the criteria had been added.
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/send-email
            </p>
          </li>
        </ul>
        <p>
          <strong
            >users/confirm<br />
            GET<br />
            Query parameters</strong
          >:
        </p>
        <ul>
          <li>
            token : an email token send on email to the user who want to
            register <br />
            Receives an email token associated with a user account, and change
            the status of the account into a confirmed account, so the user can
            sign-in into the website.
          </li>
        </ul>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/confirm
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">  {
        "type": "user",
        "_id": "5edbe762600a0c482c334af6",
        "email": "stativa50@gmail.com",
        "username": "UserTest",
        "confirmed": true,
        "__v": 0
   }
</code></pre>
        <h2 id="admin">Admin</h2>
        <p>
          <strong
            >/users<br />
            DELETE</strong
          >
        </p>
        <p>Delete all the users from the database.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users<br />
              <strong>Returned data example</strong>:
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": null
  }
</code></pre>
        <p>
          <strong
            >/users<br />
            GET</strong
          >
        </p>
        <p>Get all the users from the database.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": [
      {
        "type": "admin",
        "_id": "5ed657b935168e1968041609",
        "email": "stativa_geo@gmail.com",
        "username": "Admiul",
        "__v": 7
      },
      {
        "type": "user",
        "_id": "5edbe762600a0c482c334af6",
        "email": "stativa50@gmail.com",
        "username": "UserTest",
        "confirmed": true,
        "__v": 0
      }
    ]
  }
</code></pre>
        <p>
          <strong
            >/users/{userId}<br />
            PUT</strong
          >
        </p>
        <p>Update a user.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">   {
      "type" : "admin"
  }
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          <strong
            >/users/{userId}<br />
            DELETE</strong
          ><br />
          Delete a user.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          <strong
            >/users<br />
            POST</strong
          >
        </p>
        <p>Creates a new user.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>201 - Created</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "email" : "user123@gmail.com",
      "username" : "User123",
      "password" : "parola123",
      "type" : "user"
  }
  }
</code></pre>
        <p>
          <strong
            >/users/{userId}<br />
            GET</strong
          >
        </p>
        <p>Get a user by id.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
  "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          <strong
            >/users/{userId}<br />
            GET</strong
          >
        </p>
        <p>Get a user by id.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>201 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
  "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          <strong
            >/users/general<br />
            GET</strong
          >
        </p>
        <p>
          Get some general data about the actions made on the user database(new
          users, updated, deleted, etc)
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/general
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">{
  "content": {
    "usersNumber": 7,
    "newUsersNumber": 23,
    "deletedUsersNumber": 2,
    "updatedUsersNumber": 70
  }
}
</code></pre>
      </div>
    </div>
    <script>
      let slideIndexFirst = 1;
      showSlidesFirst(slideIndexFirst);

      function plusSlidesFirst(n) {
        showSlidesFirst((slideIndexFirst += n));
      }

      function currentSlideFirst(n) {
        showSlidesFirst((slideIndexFirst = n));
      }

      function showSlidesFirst(n) {
        let i;
        let slides = document.getElementsByClassName("firstSlider");
        let dots = document.getElementsByClassName("dotFirst");
        if (n > slides.length) {
          slideIndexFirst = 1;
        }
        if (n < 1) {
          slideIndexFirst = slides.length;
        }
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndexFirst - 1].style.display = "block";
        dots[slideIndexFirst - 1].className += " active";
      }
    </script>
    <script>
      let slideIndexSecond = 1;
      showSlidesSecond(slideIndexSecond);

      function plusSlidesSecond(n) {
        showSlidesSecond((slideIndexSecond += n));
      }

      function currentSlideSecond(n) {
        showSlidesSecond((slideIndexSecond = n));
      }

      function showSlidesSecond(n) {
        let i;
        let slides = document.getElementsByClassName("secondSlider");
        let dots = document.getElementsByClassName("dotSecond");
        if (n > slides.length) {
          slideIndexSecond = 1;
        }
        if (n < 1) {
          slideIndexSecond = slides.length;
        }
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndexSecond - 1].style.display = "block";
        dots[slideIndexSecond - 1].className += " active";
      }
    </script>
  </body>
</html>
