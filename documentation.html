<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/desktop_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/mobile_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/common_style.css"
    />
    <link
      rel="stylesheet"
      href="./frontend/staticFileLoader/public/styles/landscape_style.css"
    />
  </head>
  <body>
    <div class="documentation">
      <h1>Documentation</h1>
      <div class="documentation_content">
        <h2 id="general_documentation">I. General Documentation</h2>
        <ol>
          <li><a href="#introduction">Introduction</a></li>
          <li><a href="#app_progress">Application Progress</a></li>
          <li><a href="#app_architecture">Application Architecture</a></li>
          <li><a href="#ui_ux">UI and UX</a></li>
        </ol>
        <h2 id="user_guide">II. User Guide</h2>
        <ol>
          <li><a href="#api_accidents">API Accidents</a></li>
          <li><a href="#api_auth">API Authentication and Authorization</a></li>
        </ol>
      </div>
      <div id="introduction">
        <h2>I.1. Introduction</h2>
        <section>
          <p>
            US Accidents Smart Visualizer(AVi) is a web application for flexible
            visualization of US accident data, based on our REST API. The system
            provides support for multi-criteria search for reported incidents,
            creating chart statistics in 3 manners - pie chart, bar chart and
            line chart - and a cartographic rendering. These statistics can be
            exported in CSV, PNG and SVG formats.
          </p>
          <p>
            The application also provides an authentication system, as well as a
            module for managing the entire system. A user subscribes to the
            newsletter based on the chosen criterion, thus receiving emails
            about his topic of interest. An admin can monitor and modify the
            databases of the two services exposed through the administration
            module.
          </p>
        </section>
      </div>
      <div id="app_progress">
        <h2>I.2. Application Progress</h2>
        <section>
          <ol>
            <li><a href="#app_progress_1">First steps</a></li>
            <li>
              <a href="#app_progress_2">Getting faster better stronger</a>
            </li>
          </ol>
          <section id="app_progress_1">
            <h3>First steps</h3>
            <p>
              In the first weeks we outlined the design of the user interface,
              sketching the structure of the pages, and then we started working
              on the application.
            </p>
            <p>
              The first elements created were the menu and the general layout of
              the application, then we went to details, on each page.
            </p>
            <div class="slideshow-container">

              <!-- Full-width images with number and caption text -->
              <div class="mySlides fade">
                <div class="numbertext">1 / 4</div>
                <img
                        src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_design_1.jpg"
                        alt="Plan design"
                />
                <div class="text">Caption Text</div>
              </div>

              <div class="mySlides fade">
                <div class="numbertext">2 / 4</div>
                <img
                        src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_design_2.jpg"
                        alt="Plan design"
                />
                <div class="text">Caption Two</div>
              </div>

              <div class="mySlides fade">
                <div class="numbertext">3 / 4</div>
                <img
                        src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_design_3.jpg"
                        alt="Plan design"
                />
                <div class="text">Caption Three</div>
              </div>

              <div class="mySlides fade">
                <div class="numbertext">4 / 4</div>
                <img
                        src="./frontend/staticFileLoader/public/Images/for_documentation/images/plan_design_4.jpg"
                        alt="Plan design"
                />
                <div class="text">Caption Four</div>
              </div>

              <!-- Next and previous buttons -->
              <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
              <a class="next" onclick="plusSlides(1)">&#10095;</a>
            </div>
            <br>

            <!-- The dots/circles -->
            <div style="text-align:center">
              <span class="dot" onclick="currentSlide(1)"></span>
              <span class="dot" onclick="currentSlide(2)"></span>
              <span class="dot" onclick="currentSlide(3)"></span>
              <span class="dot" onclick="currentSlide(4)"></span>
            </div>
            <p>
              Along the way we added new elements to improve the visual
              experience of the user as well as elements that lead to the
              interaction with the services created later.
            </p>
            <p>Technologies</p>
            <p>
              The technologies used are HTML, CSS and JavaScript, these being
              the basis of the presented interface. HTML was used in order to
              mark and structure the content of the pages, CSS has the role of
              stylizing this content and JavaScript gives dynamism to the pages.
            </p>
            <p>
              For the representation of the statistics we used the libraries
              D3.js (for pie chart) and Chart.js (for bar chart and line chart).
              D3.js is a JavaScript library for producing dynamic, interactive
              data visualizations in web browsers. It makes use of SVG, HTML5
              and CSS standards. Chart.js is a free open-source JavaScript
              library for data visualization. It's tooltip and legends features
              are useful to add the extra details on charts. Works very well on
              modern browsers and charts are cross browser and cross platform
              compatible.
            </p>
          </section>
          <section id="app_progress_2">
            <h3>Getting faster better stronger</h3>
            <p>
              After we finished the frontend part of the project, we started
              thinking about the implementation of the functionalities and how
              we will integrate them in the backend part of the application.
            </p>
            <p>Technologies</p>
            <p>
              Initially we established the technologies we will use. On the
              frontend side we migrated to Pug technology instead of HTML and on
              the backend side we chose Node.JS as the technology because we
              were easily familiar with JavaScript because we used it in the
              scripts on the frontend. For data storage, we chose to use MongoDB
              because it's a document database, which means it stores data in
              JSON-like documents.
            </p>
            <p>
              Pug is a template engine for Node and for the browser. It compiles
              to HTML and has a simplified syntax, which can make you more
              productive and your code more readable. Pug makes it easy both to
              write reusable HTML, as well as to render data pulled from a
              database or API.
            </p>
            <p>
              Node.js is an open-source, cross-platform, JavaScript runtime
              environment that executes JavaScript code outside a web browser.
              Node.js lets developers use JavaScript to write command line tools
              and for server-side scripting.
            </p>
            <p>
              MongoDB is a rich and expressive query language that allows you to
              filter and sort by any field, no matter how nested it may be
              within a document. Supports arrays and nested objects as values
              and allows for flexible and dynamic schemas.
            </p>
            <p>
              The next step was to establish the application architecture.
              initially we developed a single project based on the MVC
              architecture, later translating the whole into 3 separate projects
              - the application interface, the authentication-authorization
              service and the accident service - where the services have REST
              architecture.
            </p>
          </section>
        </section>
      </div>
      <div id="app_architecture">
        <h3>I.3. Application Architecture</h3>
        <section>
          <ol>
            <li>
              <a href="#about_architecture">About Application Architecture</a>
            </li>
            <li><a href="#c4_model">C4 Model Diagram</a></li>
            <li><a href="#data_structure">Data Structure</a></li>
            <li><a href="#management">Management</a></li>
          </ol>
          <section id="about_architecture">
            <h3>About Application Architecture</h3>
            <p>
              As we mentioned, the project includes two REST services and the
              entire system interface.
            </p>
            <p>
              Regarding the interface, we designed a simple, flexible and easy
              to use structure, in order to facilitate the user experience on
              the web site. The logic underlying the architecture consists in:
              the user interacts with the interface, the interface exposes the
              representation of the data and the offered functionalities (view),
              his requests are sent both to the internal routing to navigate
              between the web pages of the application (router and controller)
              and to the two exposed services - for registration, authentication
              and authorization the authentication-authorization service is
              called and for the representation of the charts the accident
              service is called.
            </p>
            <p>
              Regarding our services, they are RESTful Web services that allow
              the requesting systems to access and manipulate textual
              representations of Web resources by using a uniform and predefined
              set of stateless operations. Requests made to URIs of exposed
              resources will elicit a response with a payload formatted in JSON.
              Using HTTP, the operations (HTTP methods) available are GET, POST,
              PUT and DELETE (and OPTIONS for preflight request in CORS).
            </p>
            <p>
              Both services present the following logic: the received requests
              are routed, according to the resource to be called (router), after
              routing, the corresponding controller will try to answer the
              request by querying the database through the model; the model will
              respond to the controller and it will send the final response to
              the client.
            </p>
            <p>
              The authentication-authorization service exposes the functionality
              of registering a new account within the application as well as the
              authentication functionality with an already created account. In
              addition, the service authorizes the admin (requests from an
              admin) giving him access to direct manipulation of the database -
              in the case of this service is exposed the users collection, a
              collection that stores registered users.
            </p>
            <p>
              The accident service responds to requests for information about
              accidents stored in the database (accidents registered in the USA
              during 2016-2019). Through this service, the secondary collections
              are created that help to display the filters (states, counties,
              cities, streets), and after the authorization (calling the
              authentication-authorization service) an admin will be able to
              produce changes and take information from the database - in the
              case of this service, the accident collection is exposed.
            </p>
          </section>
          <section id="c4_model">
            <h3>C4 Model Diagram</h3>
            <p>
              To present the overall architecture, we will use the C4 Model
              diagram which provides four different levels of abstraction, each
              of which is relevant to a different audience.
            </p>
            <p>Level 1 - Context Diagram</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/1.C4-CONTEXT.png"
              alt="C4-CONTEXT"
            />
            <p>Level 2 - Container Diagram</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/2.C4-CONTAINER.png"
              alt="C4-CONTAINER"
            />
            <p>Level 3 - Component Diagram</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/3.C4-COMPONENT.png"
              alt="C4-COMPONENT"
            />
            <p>Level 4 - Code Diagram</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/c4model/4.C4-CODE.png"
              alt="C4-CODE"
            />
          </section>
          <section id="data_structure">
            <h3>Data Structure</h3>
            <p>
              The main collection used is the accident collection, its source
              being: https://smoosavi.org/datasets/us_accidents. This collection
              contains accident data that are collected from February 2016 to
              December 2019 for the Contiguous United States.
            </p>
            <p>
              Initially this data was found in CSV format, but to facilitate
              mapping to the collection created in MongoDB we converted the
              dataset to JSON format. Also, to reduce the search time in the
              entire collection, we created local indexes on the document
              fields.
            </p>
            <p>The schema structure is:</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/images/accidents_structure.png"
              alt="Accidents Collection Structure"
            />
            <p>
              Another important collection is the users collection, which we
              created in order to store the users registered in the application.
              Based on this collection, the authentication and authorization
              checks are made within the service that deals with this.
            </p>
            <p>The schema structure is:</p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/images/users_structure.png"
              alt="Users Collection Structure"
            />
          </section>
          <section id="management">
            <h3>Management</h3>
            <p>
              For task management we used a board in Trello where we posted and
              assigned all the tasks identified by us, and for code management
              we used a GitHub repository where everyone uploaded his
              contribution to the project.
            </p>
            <p>
              On the trello board, in the TO DO section we wrote down the tasks
              we set together and assigned them together with a deadline, in the
              DOING section we moved the tasks when we were dealing with them
              and in the DONE section we moved them when they were completed.
            </p>
            <img
              src="./frontend/staticFileLoader/public/Images/for_documentation/images/trello_board.png"
              alt="Trello Board"
            />
            <p>
              Regarding the code management, each of us pushed the
              implementations of the established tasks, respecting the
              deadlines. The final form of the project, where you can also see
              the progress, can be found at:
              https://github.com/StativaCamelia/AViBACK. The repository contains
              three directories that represent the entire application: the
              frontend directory that contains the files corresponding to the
              interface, the authentication directory that contains the
              authentication-authorization API files, and the accidents
              directory that contains the accidents API files.
            </p>
            <p>
              The frontend directory contains files for router, controllers,
              views and static files loader.
            </p>
            <p>
              The authentication directory contains files for api routes,
              controllers, models and api tests.
            </p>
            <p>
              The accidents directory contains files for api routes,
              controllers, util functions, models and api tests.
            </p>
            <h3>Stativa Camelia-Georgiana</h3>
            <p>Application design</p>
            <p>Creating project structure</p>
            <p>Project restructure</p>
            <p>Database structure</p>
            <p>Project documentation</p>
            <p>Map page and line chart page</p>
            <p>Export for map page</p>
            <p>Multi-criteria filters</p>
            <p>Authorization for admin and routes</p>
            <p>Email system integration</p>
            <p>Converting CSV format to JSON format for accidents collection</p>
            <p>API tests</p>
            <h3>Zanceanu Ana-Maria</h3>
            <p>Application design</p>
            <p>Project restructure</p>
            <p>Database structure</p>
            <p>Project documentation</p>
            <p>Pie chart page</p>
            <p>Export for pie page</p>
            <p>Multi-criteria filters</p>
            <p>Dashboard</p>
            <p>Refactoring application design</p>
            <p>Register, login and logout</p>
            <h3>Tipa Adrian-Ionut</h3>
            <p>Application design</p>
            <p>Home page calls</p>
            <p>Project restructure</p>
            <p>Database structure</p>
            <p>Project documentation</p>
            <p>Profile page</p>
            <p>Bar chart page</p>
            <p>Export for bar chart and line chart pages</p>
          </section>
        </section>
      </div>
      <div id="ui_ux">
        <h3>I.4. UI and UX</h3>
        <section></section>
      </div>

      <div id="content">
        <h3 id="api_accidents">II.1. API Accidents</h3>
        <h2>Response structure</h2>
        <p>The structure of the API responses' body is as follows:</p>
        <ul>
          <li>
            <p>
              for successful responses, a JSON object containing the properties:
            </p>
            <ul>
              <li><code>success</code>: <code>true</code></li>
              <li>
                <code>data</code>: An object, structure detailed for each route
                below.
              </li>
            </ul>
          </li>
          <li>
            <p>
              for unsuccessful responses, a JSON object containing the<br />
              properties:
            </p>
            <ul>
              <li><code>success</code>: <code>false</code></li>
              <li>
                <code>error</code>: An object containing a
                <code>message</code> property, and<br />
                sometimes additional helpful properties.
              </li>
            </ul>
            <h2 id="without-authorization">Without Authorization</h2>
            <h2 id="accidents-1">/accidents</h2>
            <h3 id="get">GET</h3>
            <p><strong>Query parameters</strong>:</p>
          </li>
          <li>
            <p>
              type - the type of representation the returned data will be used
              for(map, pie, line or bar)
            </p>
          </li>
          <li>
            <p>
              any criteria the user wants his data to be filtered by and the
              value of the criteria<br />
              Get the accidents that meet the conditions in an appropriate
              format for the type of representation they will be used for
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li><p>500 - Internal Server Error</p></li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents?Type=pie&amp;Pie_Criterion=Severity
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": [
    {
      "_id": 2,
      "count": 1993409
    },
    {
      "_id": 3,
      "count": 887619
    },
    {
      "_id": 4,
      "count": 92337
    },
    {
      "_id": 1,
      "count": 970
    }
  ]
}
</code></pre>
        <p>
          ## /accidents/byDate<br />
          ### GET<br />
          Get the number of accidents that happened on this day in any given
          year<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/byDate
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": 6793
}
</code></pre>
        <p>
          ## /accidents/details<br />
          ### GET<br />
          Get the details of some accidents for a news feed purpose<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/byDate
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": "&lt;accidents&gt;&lt;accident id= \"1\"&gt;Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.&lt;/accident&gt;&lt;accident id= \"2\"&gt;Accident on I-75 Southbound at Exits 52 52B US-35. Expect delays.&lt;/accident&gt;&lt;accident id= \"3\"&gt;Accident on McEwen Rd at OH-725 Miamisburg Centerville Rd. Expect delays.&lt;/accident&gt;&lt;accident id= \"4\"&gt;Accident on I-270 Outerbelt Northbound near Exit 29 OH-3 State St. Expect delays.&lt;/accident&gt;&lt;accident id= \"5\"&gt;Accident on Oakridge Dr at Woodward Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"6\"&gt;Accident on I-75 Southbound at Exit 54B Grand Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"7\"&gt;Accident on Notre Dame Ave at Warner Ave. Expect delays.&lt;/accident&gt;&lt;accident id= \"8\"&gt;Right hand shoulder blocked due to accident on I-270 Outerbelt Westbound at Exit 29 OH-3 State St.&lt;/accident&gt;&lt;accident id= \"9\"&gt;Accident on I-270 Outerbelt Northbound at Exits 7 7A 7B US-40 Broad St. Expect delays.&lt;/accident&gt;&lt;accident id= \"10\"&gt;One lane blocked due to accident on I-70 Westbound at Exits 110 110A 110B Brice Rd. Expect delays.&lt;/accident&gt;&lt;/accidents&gt;"
}
</code></pre>
        <p>
          ## /accidents/filters<br />
          ### GET<br />
          Create a database with the location filters and the relationships
          between them, so the data will correspond with the actual data from
          the accidents database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/filters
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
    "content": "Database succesfully updated"
}
</code></pre>
        <p>
          # With Authorization(The following can only be done by an admin
          account)<br />
          ## /accidents<br />
          ### DELETE<br />
          Delets all the accidents<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
    "content": "null"
}
</code></pre>
        <p>
          ## /accidents<br />
          ### GET<br />
          Returns all the accidents from the database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p>
          <strong>Returned data example</strong>:<br />
          The content is to large to be displayed
        </p>
        <h2 id="accidents">/accidents</h2>
        <h3>POST</h3>
        <p>Creates a new accident</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents
        </p>
        <p>Request body</p>
        <pre><code class="JSON language-JSON">{
    "State" : "OH",
    "Severity" : 2
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ede3061cec18d11c82748d8",
    "State": "OH",
    "Severity": 2,
    "__v": 0
  }
}
</code></pre>
        <p>
          ## /accidents/{accidentId}<br />
          ### PUT<br />
          Update an accident from the database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/5ec65d04607fb826d4b69279<br />
          Request body
        </p>
        <pre><code class="JSON language-JSON">{
    "State" : "OH",
    "Severity" : 2
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ec65d04607fb826d4b69279",
    "ID": "A-3",
    "Source": "MapQuest",
    "TMC": "201.0",
    "Severity": 2,
    "End_Time": "2016-02-08T05:19:27.000Z",
    "Start_Lat": 39.063148,
    "Start_Lng": -84.032608,
    "End_Lat": null,
    "End_Lng": null,
    "Distance(mi)": "0.01",
    "Description": "Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.",
    "Number": "",
    "Street": "State Route 32",
    "Side": "R",
    "City": "Williamsburg",
    "County": "Clermont",
    "State": "OH",
    "Zipcode": "45176",
    "Country": "US",
    "Timezone": "US/Eastern",
    "Airport_Code": "KI69",
    "Weather_Timestamp": "2016-02-08 06:56:00",
    "Temperature(F)": 36,
    "Wind_Chill(F)": 33.3,
    "Humidity(%)": 100,
    "Pressure(in)": 29.67,
    "Visibility(mi)": 10,
    "Wind_Direction": "SW",
    "Wind_Speed(mph)": 3.5,
    "Weather_Condition": "Overcast",
    "Amenity": "False",
    "Bump": "False",
    "Crossing": "False",
    "Give_Way": "False",
    "Junction": "False",
    "No_Exit": "False",
    "Railway": "False",
    "Roundabout": "False",
    "Station": "False",
    "Stop": "False",
    "Traffic_Calming": "False",
    "Traffic_Signal": "True",
    "Turning_Loop": "False",
    "Sunrise_Sunset": "Night",
    "Civil_Twilight": "Night",
    "Nautical_Twilight": "Day",
    "Astronomical_Twilight": "Day",
    "Start_Date": "2016-02-08",
    "Start_Hour": "06:49:27"
  }
}
</code></pre>
        <p>
          ## /accidents/{accidentId}<br />
          ### DELETE<br />
          Delete an accident by id<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/5ec65d04607fb826d4b69279<br />
          <strong>Returned data example</strong>:
        </p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "_id": "5ec65d04607fb826d4b69279",
    "ID": "A-3",
    "Source": "MapQuest",
    "TMC": "201.0",
    "Severity": 2,
    "End_Time": "2016-02-08T05:19:27.000Z",
    "Start_Lat": 39.063148,
    "Start_Lng": -84.032608,
    "End_Lat": null,
    "End_Lng": null,
    "Distance(mi)": "0.01",
    "Description": "Accident on OH-32 State Route 32 Westbound at Dela Palma Rd. Expect delays.",
    "Number": "",
    "Street": "State Route 32",
    "Side": "R",
    "City": "Williamsburg",
    "County": "Clermont",
    "State": "OH",
    "Zipcode": "45176",
    "Country": "US",
    "Timezone": "US/Eastern",
    "Airport_Code": "KI69",
    "Weather_Timestamp": "2016-02-08 06:56:00",
    "Temperature(F)": 36,
    "Wind_Chill(F)": 33.3,
    "Humidity(%)": 100,
    "Pressure(in)": 29.67,
    "Visibility(mi)": 10,
    "Wind_Direction": "SW",
    "Wind_Speed(mph)": 3.5,
    "Weather_Condition": "Overcast",
    "Amenity": "False",
    "Bump": "False",
    "Crossing": "False",
    "Give_Way": "False",
    "Junction": "False",
    "No_Exit": "False",
    "Railway": "False",
    "Roundabout": "False",
    "Station": "False",
    "Stop": "False",
    "Traffic_Calming": "False",
    "Traffic_Signal": "True",
    "Turning_Loop": "False",
    "Sunrise_Sunset": "Night",
    "Civil_Twilight": "Night",
    "Nautical_Twilight": "Day",
    "Astronomical_Twilight": "Day",
    "Start_Date": "2016-02-08",
    "Start_Hour": "06:49:27"
  }
}
</code></pre>
        <h2 id="accidentsgeneral">/accidents/general</h2>
        <p>
          GET<br />
          Get some general data about the change made on the accidents
          database<br />
          <strong>Return codes</strong>:
        </p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5004/accidents/general<br />
          <strong>Returned data example</strong>:
        </p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "accidentsNumber": 2974335,
    "newAccidentsNumber": 3,
    "deletedAccidentsNumber": 3,
    "updatedAccidentsNumber": 7
  }
}
</code></pre>
      </div>

      <div id="content_auth">
        <h3 id="api_auth">II.2. API Authentication and Authorization</h3>
        <h3 id="response-structure">Response structure</h3>
        <p>The structure of the API responses' body is as follows:</p>
        <ul>
          <li>
            <p>
              for successful responses, a JSON object containing the properties:
            </p>
            <ul>
              <li><code>success</code>: <code>true</code></li>
              <li>
                <code>data</code>: An object, structure detailed for each route
                below.
              </li>
            </ul>
          </li>
          <li>
            <p>
              for unsuccessful responses, a JSON object containing the<br />
              properties:
            </p>
            <ul>
              <li><code>success</code>: <code>false</code></li>
              <li>
                <code>error</code>: An object containing a
                <code>message</code> property, and<br />
                sometimes additional helpful properties.
              </li>
            </ul>
            <h2 id="usersregister">/users/register</h2>
            <h3 id="post">POST</h3>
            <p>Creates a new user if the provided data is valid.</p>
          </li>
        </ul>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/register<br />
          Request Body
        </p>
        <pre><code class="JSON language-JSON"> {
    "email"  : "exemplu123@gmail.com",
    "password" : "exemplu123",
    "username" : "Exemplu123"
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "message": "Successfully registered! Please  confirm your email, sign in and set your profile!"
  }
}
</code></pre>
        <p>
          ## /users/login<br />
          ### POST<br />
          Creates a new session for a user by providing him an authorization
          token.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>201 - Created</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/login<br />
          Request Body
        </p>
        <pre><code class="JSON language-JSON"> {
    "email"  : "exemplu123@gmail.com",
    "username" : "Exemplu123"
}
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
    "token" : "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWQ2NTdiOTM1MTY4ZTE5NjgwNDE2MDkiLCJpYXQiOjE1OTE1OTIzOTV9.SZbK9j8b4i1pSXVSLAtSGBgu7dYiAFeTk3zzrjDKZ1s"
  }
}
</code></pre>
        <p>
          ## /users/login<br />
          ### GET<br />
          Verify if the user has a valid authorization token in the request
          header and change the content of the page according with his curent
          state.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li>200 - OK</li>
          <li>400 - There was a problem fetching data</li>
          <li>500 - Internal Server Error</li>
        </ul>
        <p>
          <strong>Usage example</strong>: <br />
          http://localhost:5003/users/login
        </p>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">{
  "content": {
          "id": "button",
          "value": "Profile",
          "href": "#",
  }
}
</code></pre>
        <h2 id="usersauthorization">users/authorization</h2>
        <p>
          ### GET<br />
          <strong>Query parameters</strong>:
        </p>
        <ul>
          <li>
            <p>
              token: the token we want to check<br />
              Receives a token a verify if the token is associated with an admin
              account
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/authorization<br />
              <strong>Returned data example</strong>:
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON"> {
  "content": {
    "success": true,
    "data": {
      "type": "admin",
      "_id": "5ed657b935168e1968041609",
      "email": "stativa_geo@gmail.com",
      "username": "Admiul",
      "password": "$2b$10$wciYae1dr7HAr77Q5lgLfOgOo4k2yuTTQKba1zMiTbSlWwMZJDNIq",
      "__v": 7
    }
  }
} {
    "content": null
  }
</code></pre>
        <h2 id="userssend-email">users/send-email</h2>
        <p>
          ### GET<br />
          <strong>Query parameters</strong>:
        </p>
        <ul>
          <li>
            <p>
              topic : A topic that a user might be interested in<br />
              Receives a topic and send an email to all the users that are have
              this criteria on their preferences list. The email will announce
              them that new data regarding the criteria had been added.
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/send-email
            </p>
          </li>
        </ul>
        <h2 id="usersconfirm">users/confirm</h2>
        <p>
          ### GET<br />
          <strong>Query parameters</strong>:
        </p>
        <ul>
          <li>
            <p>
              token : an email token send on email to the user who want to
              register <br />
              Receives an email token associated with an user account, and
              change the status of the account into a confirmed account, so the
              user can sign-in into the website.
            </p>
            <p><strong>Return codes</strong>:</p>
          </li>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/confirm
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
        "type": "user",
        "_id": "5edbe762600a0c482c334af6",
        "email": "stativa50@gmail.com",
        "username": "UserTest",
        "confirmed": true,
        "__v": 0
   }
</code></pre>
        <h2 id="admin">Admin</h2>
        <p>## /users</p>
        <p>### DELETE</p>
        <p>`Delete all the users from the database.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users<br />
              <strong>Returned data example</strong>:
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": null
  }
</code></pre>
        <p>
          ## /users<br />
          ### GET
        </p>
        <p>Get all the users from the database.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": [
      {
        "type": "admin",
        "_id": "5ed657b935168e1968041609",
        "email": "stativa_geo@gmail.com",
        "username": "Admiul",
        "__v": 7
      },
      {
        "type": "user",
        "_id": "5edbe762600a0c482c334af6",
        "email": "stativa50@gmail.com",
        "username": "UserTest",
        "confirmed": true,
        "__v": 0
      }
    ]
  }
</code></pre>
        <p>
          ## /users/{userId}<br />
          ### PUT
        </p>
        <p>Update a user.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">   {
      "type" : "admin"
  }
</code></pre>
        <p><strong>Returned data example</strong>:</p>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          ## /users/{userId}<br />
          ### DELETE<br />
          Delete an user.
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          ## /users<br />
          ### POST
        </p>
        <p>Creates a new user.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>201 - Created</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
    "content": {
      "email" : "user123@gmail.com",
      "username" : "User123",
      "password" : "parola123",
      "type" : "user"
  }
  }
</code></pre>
        <p>
          ## /users/{userId}<br />
          ### GET
        </p>
        <p>Get an user by id.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
  "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <p>
          ## /users/{userId}<br />
          ### GET
        </p>
        <p>Get an user by id.</p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>201 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/5ede3a7d0ff94b173c4a92f0
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">  {
  "content": {
      "type": "admin",
      "_id": "5ede3a7d0ff94b173c4a92f0",
      "email": "stativa123@gmail.com",
      "username": "Stativa123",
      "password": "$2b$10$t7q6M8e3aDHSeXkJD1eK5OUtIoVwL7rIQ4y4whHSnHSHEsxEyDURG",
      "confirmed": false,
      "__v": 0
    }
  }
</code></pre>
        <pre><code>## /users/general
</code></pre>
        <p>### GET</p>
        <p>
          Get some general data about the actions made on the user database(new
          users, updated, deleted, etc)
        </p>
        <p><strong>Return codes</strong>:</p>
        <ul>
          <li><p>200 - OK</p></li>
          <li><p>400 - There was a problem fetching data</p></li>
          <li>
            <p>500 - Internal Server Error</p>
            <p>
              <strong>Usage example</strong>: <br />
              http://localhost:5003/users/general
            </p>
            <p><strong>Returned data example</strong>:</p>
          </li>
        </ul>
        <pre><code class="JSON language-JSON">{
  "content": {
    "usersNumber": 7,
    "newUsersNumber": 23,
    "deletedUsersNumber": 2,
    "updatedUsersNumber": 70
  }
}
</code></pre>
      </div>
    </div>
  <script>
    let slideIndex = 1;
    showSlides(slideIndex);

    // Next/previous controls
    function plusSlides(n) {
      showSlides(slideIndex += n);
    }

    // Thumbnail image controls
    function currentSlide(n) {
      showSlides(slideIndex = n);
    }

    function showSlides(n) {
      let i;
      let slides = document.getElementsByClassName("mySlides");
      let dots = document.getElementsByClassName("dot");
      if (n > slides.length) {slideIndex = 1}
      if (n < 1) {slideIndex = slides.length}
      for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
      }
      for (i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(" activeSlide", "");
      }
      slides[slideIndex-1].style.display = "block";
      dots[slideIndex-1].className += " activeSlide";
    }
  </script>
  </body>
</html>
